{"swagger":"2.9.9","basePath":"","info":{"title":"IOT-GATEWAY  REST API","version":"1.0.0","description":"\n\t物联网网关累死你API接口\n"},"schemes":["http","https"],"consumes":["gateway/json"],"produces":["gateway/json"],"paths":{"/api/get_device_history":{"get":{"operationId":"DoGetHistory","parameters":[{"in":"query","name":"devid","required":false,"type":"string"},{"in":"query","name":"cmdtype","required":false,"type":"string"},{"in":"query","name":"since","required":false,"type":"string"},{"in":"query","name":"until","required":false,"type":"string"}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/apiDoGetHistoryResponse"}}},"summary":"读设备历史记录","tags":["GatewayService"]}},"/api/get_device_value/{devid}":{"get":{"operationId":"DoGetValue","parameters":[{"in":"path","name":"devid","required":true,"type":"string"}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/apiDoGetValueResponse"}}},"summary":"读取设备当前的值","tags":["GatewayService"]}},"/api/list_support_device":{"get":{"operationId":"SuppotList","responses":{"200":{"description":"","schema":{"$ref":"#/definitions/apiGetSuppotResponse"}}},"summary":"查看网关支持的设备列表","tags":["GatewayService"]}},"/api/meter_add_or_uppdate":{"put":{"operationId":"ElectricMeterUpdate","parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/apiElectricMeterUpdateRequest"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/apiElectricMeterUpdateResponse"}}},"summary":"添加或更新电表设备","tags":["ElectricMeter"]}},"/api/meter_dtl645_2007_add_or_uppdate":{"put":{"operationId":"Dtl645_2007Update","parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/apiDtl645_2007UpdateRequest"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/apiDtl645_2007UpdateResponse"}}},"summary":"添加或更新DLT645-2007标准协议表具设备","tags":["DLT645_2007"]}},"/api/modbusrtu_add_or_uppdate":{"put":{"operationId":"ModbusRtuUpdate","parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/apiModbusRtuUpdateRequest"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/apiModbusRtuUpdateResponse"}}},"summary":"添加或更新ModbusRtu设备","tags":["ModbusRtu"]}},"/api/modbustcp_add_or_uppdate":{"put":{"operationId":"ModbusTCPUpdate","parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/apiModbusTcpUpdateRequest"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/apiModbusTcpUpdateResponse"}}},"summary":"添加或更新ModbusTcp设备","tags":["ModbusTcp"]}},"/api/modify_user_passwd":{"put":{"operationId":"ModifyUserPw","parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/apiModifyUserPwRequest"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/apiModifyUserPwResponse"}}},"summary":"修改用户名和密码","tags":["GatewayService"]}},"/api/remove_device/{devid}":{"delete":{"operationId":"DevDelete","parameters":[{"in":"path","name":"devid","required":true,"type":"string"}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/apiDelDevResponse"}}},"summary":"删除设备","tags":["GatewayService"]}},"/api/set_auto_updata_interval":{"put":{"operationId":"SetInterval","parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/apiSetIntervalRequest"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/apiSetIntervalResponse"}}},"summary":"设置网关自动上报的时间间隔(0为不自动上报)","tags":["GatewayService"]}},"/api/set_gateway_config":{"put":{"operationId":"GatewaySet","parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/apiSetGatewayManageRequest"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/apiSetGatewayManageResponse"}}},"summary":"设置网关配置参数","tags":["GatewayService"]}},"/api/set_tls_config":{"put":{"operationId":"SetTLSConfig","parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/apiSetTLSConfigRequest"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/apiSetTLSConfigResponse"}}},"summary":"设置网关SSL/TLS(http://xxx.xxx.xxx/...)","tags":["GatewayService"]}},"/api/show_current_device_list":{"get":{"operationId":"DevList","responses":{"200":{"description":"","schema":{"$ref":"#/definitions/apiGetDevListResponse"}}},"summary":"查看已添加的设备列表","tags":["GatewayService"]}},"/api/show_gateway_config":{"get":{"operationId":"GatewayGet","responses":{"200":{"description":"","schema":{"$ref":"#/definitions/apiGetGatewayManageResponse"}}},"summary":"查看网关当前的配置","tags":["GatewayService"]}},"/api/tc100r8_add_or_uppdate":{"put":{"operationId":"TcozzreUpdate","parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/apiTcozzreUpdateRequest"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/apiTcozzreUpdateResponse"}}},"summary":"添加或更新TC100R8控制器","tags":["TC100R8"]}},"/api/update_gateway_system":{"put":{"operationId":"UpdateGatewaySystem","parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/apiUpdateGatewaySystemRequest"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/apiUpdateGatewaySystemResponse"}}},"summary":"更新网关系统(http://xxx.xxx.xxx/...)","tags":["GatewayService"]}},"/api/watermeter_add_or_uppdate":{"put":{"operationId":"WaterMeterUpdate","parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/apiWaterMeterUpdateRequest"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/apiWaterMeterUpdateResponse"}}},"summary":"添加或更新水表设备","tags":["WaterMeter"]}}},"definitions":{"apiDelDevResponse":{"properties":{"result":{"type":"string"}},"type":"object"},"apiDevStruct":{"properties":{"conn":{"additionalProperties":{"type":"string"},"type":"object"},"devid":{"type":"string"},"devtype":{"type":"string"}},"type":"object"},"apiDoGetHistoryResponse":{"properties":{"data":{"items":{"$ref":"#/definitions/apiHistoryStuct"},"type":"array"}},"type":"object"},"apiDoGetValueResponse":{"properties":{"data":{"additionalProperties":{"type":"string"},"type":"object"}},"type":"object"},"apiDtl645_2007UpdateRequest":{"properties":{"baudRate":{"format":"int64","type":"integer"},"commif":{"type":"string"},"dataBits":{"format":"int64","type":"integer"},"devaddr":{"type":"string"},"devid":{"type":"string"},"devtype":{"type":"string"},"dname":{"type":"string"},"parity":{"type":"string"},"stopBits":{"format":"int64","type":"integer"}},"type":"object"},"apiDtl645_2007UpdateResponse":{"properties":{"Result":{"type":"string"}},"type":"object"},"apiElectricMeterUpdateRequest":{"properties":{"commif":{"type":"string"},"devaddr":{"type":"string"},"devid":{"type":"string"},"devtype":{"type":"string"},"dname":{"type":"string"}},"type":"object"},"apiElectricMeterUpdateResponse":{"properties":{"Result":{"type":"string"}},"type":"object"},"apiGetDevListResponse":{"properties":{"data":{"items":{"$ref":"#/definitions/apiDevStruct"},"type":"array"}},"type":"object"},"apiGetGatewayManageResponse":{"properties":{"clientId":{"type":"string"},"clientIp":{"type":"string"},"gateway":{"type":"string"},"historydays":{"type":"string"},"interval":{"type":"string"},"mqttPassword":{"type":"string"},"mqttStatus":{"type":"string"},"mqttUsername":{"type":"string"},"netmask":{"type":"string"},"serverIp":{"type":"string"},"serverName":{"type":"string"},"serverPort":{"type":"string"},"systemStat":{"type":"string"}},"type":"object"},"apiGetSuppotResponse":{"properties":{"supportlist":{"items":{"type":"string"},"type":"array"}},"type":"object"},"apiHistoryStuct":{"properties":{"cmdtype":{"type":"string"},"timestamp":{"type":"string"},"value":{"additionalProperties":{"type":"string"},"type":"object"}},"type":"object"},"apiModbusRtuUpdateRequest":{"properties":{"baudRate":{"format":"int64","type":"integer"},"commif":{"type":"string"},"dataBits":{"format":"int64","type":"integer"},"devaddr":{"type":"string"},"devid":{"type":"string"},"dname":{"type":"string"},"functionCode":{"format":"int64","type":"integer"},"parity":{"type":"string"},"quantity":{"format":"int64","type":"integer"},"startingAddress":{"format":"int64","type":"integer"},"stopBits":{"format":"int64","type":"integer"}},"type":"object"},"apiModbusRtuUpdateResponse":{"properties":{"Result":{"type":"string"}},"type":"object"},"apiModbusTcpUpdateRequest":{"properties":{"commif":{"type":"string"},"devaddr":{"type":"string"},"devid":{"type":"string"},"dname":{"type":"string"},"functionCode":{"format":"int64","type":"integer"},"quantity":{"format":"int64","type":"integer"},"startingAddress":{"format":"int64","type":"integer"}},"type":"object"},"apiModbusTcpUpdateResponse":{"properties":{"Result":{"type":"string"}},"type":"object"},"apiModifyUserPwRequest":{"properties":{"password":{"type":"string"},"username":{"type":"string"}},"type":"object"},"apiModifyUserPwResponse":{"properties":{"result":{"type":"string"}},"type":"object"},"apiSetGatewayManageRequest":{"properties":{"clientIp":{"description":"string clientId=1;","type":"string"},"gateway":{"type":"string"},"inet":{"type":"string"},"mqttPassword":{"type":"string"},"mqttUsername":{"type":"string"},"netmask":{"type":"string"},"serverIp":{"type":"string"},"serverName":{"type":"string"},"serverPort":{"type":"string"}},"type":"object"},"apiSetGatewayManageResponse":{"properties":{"result":{"type":"string"}},"type":"object"},"apiSetIntervalRequest":{"properties":{"interval":{"format":"int32","type":"integer"}},"type":"object"},"apiSetIntervalResponse":{"properties":{"result":{"type":"string"}},"type":"object"},"apiSetTLSConfigRequest":{"properties":{"cafile":{"type":"string"},"certfile":{"type":"string"},"keyfile":{"type":"string"}},"type":"object"},"apiSetTLSConfigResponse":{"properties":{"result":{"type":"string"}},"type":"object"},"apiTcozzreUpdateRequest":{"properties":{"commif":{"type":"string"},"devaddr":{"type":"string"},"devid":{"type":"string"},"dname":{"type":"string"}},"type":"object"},"apiTcozzreUpdateResponse":{"properties":{"Result":{"type":"string"}},"type":"object"},"apiUpdateGatewaySystemRequest":{"properties":{"url":{"type":"string"}},"type":"object"},"apiUpdateGatewaySystemResponse":{"properties":{"result":{"type":"string"}},"type":"object"},"apiWaterMeterUpdateRequest":{"properties":{"commif":{"type":"string"},"devaddr":{"type":"string"},"devid":{"type":"string"},"devtype":{"type":"string"},"dname":{"type":"string"},"fcode":{"type":"string"}},"type":"object"},"apiWaterMeterUpdateResponse":{"properties":{"Result":{"type":"string"}},"type":"object"}}}
